(function(t,_){typeof exports=="object"&&typeof module<"u"?module.exports=_(require("vue")):typeof define=="function"&&define.amd?define(["vue"],_):(t=typeof globalThis<"u"?globalThis:t||self,t["vue-meeting-selector"]=_(t.Vue))})(this,function(t){"use strict";const _="",$=t.defineComponent({name:"meetingsDisplay",props:{meetingSlot:{type:Object,required:!0},meetingSlotSelected:{type:[Array,Object,null],required:!0},meetingButtonClass:{type:String,default:""},meetingEmptyClass:{type:String,default:""}},emits:["meeting-slot-click"],setup(e,n){const a=t.computed(()=>{const o=new Date(e.meetingSlot.date),d=o.getHours()<10?`0${o.getHours()}`:o.getHours(),c=o.getMinutes()<10?`0${o.getMinutes()}`:o.getMinutes();return`${d}:${c}`}),s=t.computed(()=>{if(Array.isArray(e.meetingSlotSelected)){const o=new Date(e.meetingSlot.date).getTime();for(const d of e.meetingSlotSelected)if(new Date(d.date).getTime()===o)return!0;return!1}if(e.meetingSlotSelected&&e.meetingSlotSelected.date){const o=new Date(e.meetingSlotSelected.date),d=new Date(e.meetingSlot.date);return o.getTime()===d.getTime()}return!1});return{meetingClass:t.computed(()=>({[e.meetingButtonClass]:!0,"meeting__button--selected":s.value})),time:a,meetingSlotClick:()=>{n.emit("meeting-slot-click",e.meetingSlot)}}}}),ae="",y=(e,n)=>{const a=e.__vccOpts||e;for(const[s,r]of n)a[s]=r;return a},S={class:"meeting"},B=["disabled"];function h(e,n,a,s,r,m){return t.openBlock(),t.createElementBlock("div",S,[e.meetingSlot.date?(t.openBlock(),t.createElementBlock("button",{key:0,type:"button",class:t.normalizeClass(["meeting__button",e.meetingClass]),disabled:!e.meetingSlot.date,onClick:n[0]||(n[0]=(...o)=>e.meetingSlotClick&&e.meetingSlotClick(...o))},t.toDisplayString(e.time),11,B)):(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(["meeting__empty",e.meetingEmptyClass])}," \u2014 ",2))])}const M=y($,[["render",h],["__scopeId","data-v-99e55f0d"]]),V=t.defineComponent({name:"MeetingsList",components:{MeetingDisplay:M},props:{meetingsDay:{type:Object,default:null},meetingSlotSelected:{type:[Array,Object,null],required:!0},meetingClass:{type:String,default:""},meetingButtonClass:{type:String,default:""},meetingEmptyClass:{type:String,default:""}},emits:["meeting-slot-click"],setup(e,n){return{meetingSlotClick:s=>{n.emit("meeting-slot-click",s)}}}}),oe="",E={class:"meetings"};function N(e,n,a,s,r,m){const o=t.resolveComponent("meeting-display");return t.openBlock(),t.createElementBlock("div",E,[e.$slots.meeting?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(e.meetingsDay.slots,(d,c)=>(t.openBlock(),t.createElementBlock("div",{key:c},[t.renderSlot(e.$slots,"meeting",{meeting:d},void 0,!0)]))),128)):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:1},t.renderList(e.meetingsDay.slots,(d,c)=>(t.openBlock(),t.createBlock(o,{class:t.normalizeClass(e.meetingClass),"meeting-button-class":e.meetingButtonClass,"meeting-empty-class":e.meetingEmptyClass,"meeting-slot":d,"meeting-slot-selected":e.meetingSlotSelected,onMeetingSlotClick:e.meetingSlotClick,key:c},null,8,["class","meeting-button-class","meeting-empty-class","meeting-slot","meeting-slot-selected","onMeetingSlotClick"]))),128))])}const w=y(V,[["render",N],["__scopeId","data-v-59393793"]]),L=t.defineComponent({name:"DayDisplay",props:{meetingsDay:{type:Object,required:!0},daysLabel:{type:Array,required:!0},monthsLabel:{type:Array,required:!0}},setup(e){const n=t.computed(()=>{const s=new Date(e.meetingsDay.date);return e.daysLabel[s.getDay()]}),a=t.computed(()=>{const s=new Date(e.meetingsDay.date);return`${s.getDate()} ${e.monthsLabel[s.getMonth()]}`});return{title:n,subtitle:a}}}),ie="",P={class:"day"},z={class:"day__title"},A={class:"day__subtitle"};function j(e,n,a,s,r,m){return t.openBlock(),t.createElementBlock("div",P,[t.createElementVNode("div",z,t.toDisplayString(e.title),1),t.createElementVNode("div",A,t.toDisplayString(e.subtitle),1)])}const I=y(L,[["render",j],["__scopeId","data-v-11f9b4ca"]]),O=t.defineComponent({name:"ArrowIcon",props:{direction:{type:String,default:"right"}},setup(e){return{iconDirectionClass:t.computed(()=>`vms-icon-${e.direction}`)}}}),le="";function T(e,n,a,s,r,m){return t.openBlock(),t.createElementBlock("i",{class:t.normalizeClass(["vms-icon",e.iconDirectionClass])},null,2)}const q=y(O,[["render",T],["__scopeId","data-v-6ce31d85"]]),F=t.defineComponent({name:"SpinLoader"}),de="",H={class:"vms-icon-loader"};function U(e,n,a,s,r,m){return t.openBlock(),t.createElementBlock("i",H)}const Y=y(F,[["render",U],["__scopeId","data-v-a175ea8d"]]),G=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],J=["jan.","feb.","mar.","apr.","may.","jun.","jul.","aug.","sep.","oct.","nov.","dec."],D=e=>{const n=e.getMonth()+1<10?`0${e.getMonth()+1}`:e.getMonth()+1,a=e.getDate()<10?`0${e.getDate()}`:e.getDate();return parseInt(`${e.getFullYear()}${n}${a}`,10)},K={daysLabel:G,monthsLabel:J,limit:4,spacing:4,loadingLabel:"Loading ...",disabledDate:e=>{const n=new Date(e),a=new Date;return D(n)<=D(a)}},Q={tabClass:"",tabPaginationPrevious:"",tabPaginationPreviousButton:"",tabPaginationNext:"",tabPaginationNextButton:"",tabPaginationUpButton:"",tabPaginationDownButton:"",tabDays:"",tabDayDisplay:"",tabMeetings:"",tabMeeting:"",tabMeetingButton:"",tabMeetingEmpty:"",tabLoading:""},R=t.defineComponent({name:"meetingSelector",components:{Meetings:w,DayDisplay:I,ArrowIcon:q,Loader:Y},props:{modelValue:{type:[Array,Object,null],required:!0},date:{type:Date,required:!0},meetingsDays:{type:Array,required:!0},calendarOptions:{type:Object,default:()=>({})},classNames:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1},multi:{type:Boolean,default:!1}},emits:["previous-date","next-date","meeting-slot-selected","change","meeting-slot-unselected","update:modelValue"],setup(e,n){const a=t.ref(0),s=t.computed(()=>({...K,...e.calendarOptions})),r=t.computed(()=>({...Q,...e.classNames})),m=t.computed(()=>e.meetingsDays&&e.meetingsDays.length?Math.max(...e.meetingsDays.map(l=>l.slots.length)):0),o=t.computed(()=>{const l=Math.ceil(m.value/s.value.limit)*s.value.limit;return e.meetingsDays?e.meetingsDays.map(g=>{const u=new Array(l).fill({date:""});return u.splice(0,g.slots.length,...g.slots),{...g,slots:u.slice(a.value,a.value+s.value.limit)}}):[]}),d=t.computed(()=>{const{daysLabel:l}=s.value;return e.meetingsDays?e.meetingsDays.map(g=>{const u=new Date(g.date);return l[u.getDay()]}):[]}),c=()=>{a.value+=s.value.spacing},b=()=>{a.value-=s.value.spacing},i=()=>{n.emit("previous-date")},f=()=>{n.emit("next-date")},C=l=>l+1===o.value.length?`tab__days--last ${r.value.tabMeetings}`:r.value.tabMeetings||"",k=l=>{if(e.multi&&Array.isArray(e.modelValue)){const g=new Date(l.date).getTime(),u=e.modelValue.findIndex(se=>new Date(se.date).getTime()===g),p=[...e.modelValue];u!==-1?(p.splice(u,1),n.emit("change",p),n.emit("meeting-slot-selected",p),n.emit("update:modelValue",p)):(p.push(l),n.emit("change",p),n.emit("meeting-slot-selected",p),n.emit("update:modelValue",p));return}if(e.modelValue){const g=new Date(l.date);if(new Date(e.modelValue.date).getTime()===g.getTime()){n.emit("change",void 0),n.emit("meeting-slot-unselected"),n.emit("update:modelValue");return}}n.emit("change",l),n.emit("meeting-slot-selected",l),n.emit("update:modelValue",l)};return n.expose({nextMeetings:c,previousMeetings:b,previousDate:i,nextDate:f,meetingSlotClick:k}),{skip:a,options:s,cssClass:r,tabDaysClass:C,maxNbMeetings:m,meetingsByDays:o,days:d,nextMeetings:c,previousMeetings:b,previousDate:i,nextDate:f,meetingSlotClick:k}}}),ce="",W={class:"meeting-selector"},X=["disabled"],Z={class:"tab__days"},v={key:1,class:"tab__loading__text"},x=["disabled"],ee=["disabled"],te=["disabled"];function ne(e,n,a,s,r,m){const o=t.resolveComponent("arrow-icon"),d=t.resolveComponent("day-display"),c=t.resolveComponent("meetings"),b=t.resolveComponent("loader");return t.openBlock(),t.createElementBlock("div",W,[t.createElementVNode("div",{class:t.normalizeClass([e.cssClass.tabClass,"tab"])},[t.createElementVNode("div",{class:t.normalizeClass(["tab__pagination",e.cssClass.tabPaginationPrevious])},[t.renderSlot(e.$slots,"button-previous",{},()=>[t.createElementVNode("button",{type:"button",disabled:e.options.disabledDate(e.date)||e.loading,class:t.normalizeClass(["tab__pagination__button",e.cssClass.tabPaginationPreviousButton]),onClick:n[0]||(n[0]=(...i)=>e.previousDate&&e.previousDate(...i))},[t.createVNode(o,{direction:"left"})],10,X)],!0)],2),t.createElementVNode("div",Z,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.meetingsByDays,(i,f)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["tab__day",e.tabDaysClass(f)]),key:String(i.date)},[t.renderSlot(e.$slots,"header",{meetings:i},()=>[t.createVNode(d,{class:t.normalizeClass(["tab__days__day-display",e.cssClass.tabDayDisplay]),"meetings-day":i,"months-label":e.options.monthsLabel,"days-label":e.options.daysLabel},null,8,["class","meetings-day","months-label","days-label"])],!0),t.createVNode(c,{class:t.normalizeClass(["tab__days__meetings",e.cssClass.tabMeetings]),"meeting-class":e.cssClass.tabMeeting,"meeting-button-class":e.cssClass.tabMeetingButton,"meeting-empty-class":e.cssClass.tabMeetingEmpty,"meetings-day":i,"meeting-slot-selected":e.modelValue,onMeetingSlotClick:e.meetingSlotClick},t.createSlots({_:2},[e.$slots.meeting?{name:"meeting",fn:t.withCtx(({meeting:C})=>[t.renderSlot(e.$slots,"meeting",{meeting:C},void 0,!0)]),key:"0"}:void 0]),1032,["class","meeting-class","meeting-button-class","meeting-empty-class","meetings-day","meeting-slot-selected","onMeetingSlotClick"])],2))),128)),e.loading?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["tab__loading",e.cssClass.tabLoading])},[e.$slots.loading?t.renderSlot(e.$slots,"loading",{key:0},void 0,!0):(t.openBlock(),t.createElementBlock("div",v,[t.createVNode(b),t.createTextVNode(" "+t.toDisplayString(e.options.loadingLabel),1)]))],2)):t.createCommentVNode("",!0)]),t.createElementVNode("div",{class:t.normalizeClass(["tab__pagination",e.cssClass.tabPaginationNext])},[t.renderSlot(e.$slots,"button-next",{},()=>[t.createElementVNode("button",{type:"button",class:t.normalizeClass(["tab__pagination__button tab__pagination__button--right",e.cssClass.tabPaginationNextButton]),disabled:e.loading,onClick:n[1]||(n[1]=(...i)=>e.nextDate&&e.nextDate(...i))},[t.createVNode(o,{direction:"right"})],10,x)],!0),t.renderSlot(e.$slots,"button-up",{isDisabled:e.skip===0||e.loading},()=>[t.createElementVNode("button",{type:"button",class:t.normalizeClass([e.cssClass.tabPaginationUpButton,"tab__pagination__button tab__pagination__button--up"]),disabled:e.skip===0||e.loading,onClick:n[2]||(n[2]=(...i)=>e.previousMeetings&&e.previousMeetings(...i))},[t.createVNode(o,{direction:"up"})],10,ee)],!0),t.renderSlot(e.$slots,"button-down",{isDisabled:e.skip+e.options.spacing>=e.maxNbMeetings||e.loading},()=>[t.createElementVNode("button",{type:"button",class:t.normalizeClass([e.cssClass.tabPaginationDownButton,"tab__pagination__button tab__pagination__button--down"]),disabled:e.skip+e.options.spacing>=e.maxNbMeetings||e.loading,onClick:n[3]||(n[3]=(...i)=>e.nextMeetings&&e.nextMeetings(...i))},[t.createVNode(o,{direction:"down"})],10,te)],!0)],2)],2)])}return y(R,[["render",ne],["__scopeId","data-v-adda00da"]])});
